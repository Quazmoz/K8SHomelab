# AI Context: Ansible AWX

> **AI Maintenance Rule:** If you modify any files in this deployment, you MUST update both this `AI_CONTEXT.md` and the `README.md` to reflect your changes before completing your task.

## Purpose

Ansible automation platform with web UI. Manages playbooks, inventories, credentials, and job templates. Deployed via AWX Operator.

## Architecture

- **Type:** Flux HelmRelease (AWX Operator) + AWX CustomResource
- **Operator Chart:** `awx-operator` v2.19.1 from `awx-operator` repo
- **Namespace:** `apps`
- **Node:** `quinn-hpprobook430g6`
- **URL:** `http://awx.k8s.local`

## Files

| File | Purpose |
|------|---------|
| `kustomization.yaml` | Resource list |
| `awx-crd.yaml` | AWX CustomResourceDefinition |
| `awx-operator-helmrelease.yaml` | HelmRelease for AWX Operator |
| `awx-postgres-secret.yaml` | Secret with external PostgreSQL connection details |
| `awx-cr.yaml` | AWX instance CR (ingress, resources, DB config, projects volume) |

## Key Configuration

- External PostgreSQL database (`awx` DB, `awx` user)
- Postgres connection via `awx-postgres-configuration` secret
- Admin password via `awx-admin-password` secret (auto-generated by operator)
- Projects stored on 10Gi PVC
- Ingress: nginx class, hostname `awx.k8s.local`

## Dependencies

- **Depends on:** PostgreSQL (`awx` database), Sources (HelmRepository `awx-operator`)
- **Depended on by:** Nothing directly (end-user tool)

## Modification Notes

- AWX state (projects, credentials, job templates) lives in the database, NOT in git
- The CRD file (`awx-crd.yaml`) must match the operator version
- Resource limits are in the AWX CR, not the HelmRelease
- The operator manages AWX pod lifecycle â€” don't modify AWX pods directly
- Re-creating the database loses all AWX configuration
