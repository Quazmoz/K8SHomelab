# mcpo ConfigMap
# Contains config.json for multiple MCP servers
# MCPO handles: Postgres, Kubernetes, Prometheus, FreshRSS, n8n (stdio servers)
# Context Forge handles: Azure, GroupMe, ClickUp (SSE/HTTP servers)
apiVersion: v1
kind: ConfigMap
metadata:
  name: mcpo-config
  namespace: apps
data:
  config.json: |
    {
      "mcpServers": {

        "postgres": {
          "command": "npx",
          "args": ["-y", "@henkey/postgres-mcp-server"],
          "env": {
            "POSTGRES_HOST": "postgres.apps.svc.cluster.local",
            "POSTGRES_PORT": "5432",
            "POSTGRES_DATABASE": "postgres",
            "POSTGRES_USER": "grafana_user",
            "POSTGRES_PASSWORD": "passwordfortesting123",
            "POSTGRES_CONNECTION_STRING": "postgresql://grafana_user:passwordfortesting123@postgres.apps.svc.cluster.local:5432/postgres"
          }
        },
        "kubernetes": {
          "command": "npx",
          "args": ["-y", "kubernetes-mcp-server@latest"]
        },
        "prometheus": {
          "command": "npx",
          "args": ["-y", "prometheus-mcp-server"],
          "env": {
            "PROMETHEUS_URL": "http://prometheus-server.apps.svc.cluster.local"
          }
        },
        "freshrss": {
          "command": "npx",
          "args": ["-y", "mcp-server-fetch"],
          "env": {
            "FETCH_URL": "http://freshrss.apps.svc.cluster.local/api/greader.php"
          }
        },
        "n8n": {
          "command": "sh",
          "args": [
            "-c",
            "exec npx -y supergateway --streamableHttp http://n8n.apps.svc.cluster.local:5678/mcp-server/http --header 'Accept: application/json, text/event-stream' --oauth2Bearer \"$N8N_MCP_TOKEN\""
          ]
        }
      }
    }
